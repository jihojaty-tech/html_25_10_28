<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="img/ë¡œê³ .png">
  <title>ììœ ê²Œì‹œíŒ</title>
  <style>
    * { box-sizing: border-box; font-family: 'Pretendard','Noto Sans KR',sans-serif; }
    body { background-color: #f8f9fb; margin: 0; color: #333; }

    .container {
      max-width: 1000px;
      margin: 50px auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 30px 40px;
    }

    /* ê³µí†µ í—¤ë” */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #3B82F6;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    .header h1 { color: #3B82F6; margin: 0; }
    .btn {
      background-color: #3B82F6;
      color: #fff;
      border: none;
      border-radius: 5px;
      padding: 8px 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .btn:hover { background-color: #2563eb; }

    /* ëª©ë¡ í™”ë©´ */
    #list-page table {
      width: 100%;
      border-collapse: collapse;
      text-align: center;
    }
    #list-page th, #list-page td {
      padding: 12px;
      border-bottom: 1px solid #e5e7eb;
    }
    #list-page thead { background-color: #f1f5f9; }
    #list-page td.title { text-align: left; color: #1d4ed8; cursor: pointer; }
    #list-page td.title:hover { text-decoration: underline; }

    /* ê¸€ì“°ê¸° / ìƒì„¸ë³´ê¸° í™”ë©´ */
    #write-page, #view-page { display: none; }
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; margin-bottom: 6px; font-weight: 600; color: #555; }
    .form-group input[type="text"], .form-group textarea {
      width: 100%; padding: 10px 12px; border: 1px solid #ccc; border-radius: 5px;
    }
    .form-group textarea { min-height: 250px; resize: none; }
    .button-box { display: flex; justify-content: flex-end; gap: 10px; }
    .cancel-btn { background-color: #e5e7eb; color: #333; }
    .cancel-btn:hover { background-color: #d1d5db; }

    /* ìƒì„¸ë³´ê¸° */
    .view-field { margin-bottom: 20px; }
    .view-label { font-weight: bold; color: #555; }
    .view-content {
      background: #f9fafb;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 12px;
      white-space: pre-wrap;
      min-height: 150px;
    }
  </style>
</head>
<body>

  <!-- âœ… ê²Œì‹œíŒ ëª©ë¡ -->
  <div class="container" id="list-page">
    <div class="header">
      <h1>ììœ ê²Œì‹œíŒ</h1>
      <button class="btn" onclick="showWritePage()">ê¸€ì“°ê¸°</button>
    </div>

    <table id="postTable">
      <thead>
        <tr>
          <th>ë²ˆí˜¸</th><th>ì œëª©</th><th>ì‘ì„±ì</th><th>ë‚ ì§œ</th><th>ì¡°íšŒìˆ˜</th>
        </tr>
      </thead>
      <tbody id="postList"></tbody>
    </table>
  </div>

  <!-- âœ… ê¸€ì“°ê¸° -->
  <div class="container" id="write-page">
    <div class="header">
      <h1>ê¸€ì“°ê¸°</h1>
      <button class="btn cancel-btn" onclick="showListPage()">ë’¤ë¡œê°€ê¸°</button>
    </div>

    <form id="postForm">
      <div class="form-group">
        <label for="title">ì œëª©</label>
        <input type="text" id="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>
      </div>

      <div class="form-group">
        <label for="author">ì‘ì„±ì</label>
        <input type="text" id="author" placeholder="ì‘ì„±ìë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
      </div>

      <div class="form-group">
        <label for="content">ë‚´ìš©</label>
        <textarea id="content" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
      </div>

      <div class="button-box">
        <button type="submit" class="btn">ì €ì¥</button>
        <button type="button" class="btn cancel-btn" onclick="showListPage()">ì·¨ì†Œ</button>
      </div>
    </form>
  </div>

  <!-- âœ… ìƒì„¸ë³´ê¸° -->
  <div class="container" id="view-page">
    <div class="header">
      <h1>ê²Œì‹œê¸€ ë³´ê¸°</h1>
      <button class="btn cancel-btn" onclick="showListPage()">ëª©ë¡ìœ¼ë¡œ</button>
    </div>

    <div class="view-field">
      <div class="view-label">ì œëª©</div>
      <div id="view-title" class="view-content"></div>
    </div>
    <div class="view-field">
      <div class="view-label">ì‘ì„±ì</div>
      <div id="view-author" class="view-content"></div>
    </div>
    <div class="view-field">
      <div class="view-label">ë‚´ìš©</div>
      <div id="view-content" class="view-content"></div>
    </div>
    <div class="button-box">
      <button class="btn" onclick="showWritePage(true)">ìˆ˜ì •</button>
      <button class="btn cancel-btn" onclick="deletePost()">ì‚­ì œ</button>
    </div>
  </div>

  <script>
    let posts = [];           // ê²Œì‹œê¸€ ëª©ë¡
    let currentPostId = null; // í˜„ì¬ ë³´ê³  ìˆëŠ” ê²Œì‹œê¸€ ID

    // ğŸš€ í˜ì´ì§€ ë¡œë“œ ì‹œ LocalStorageì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°
    window.onload = function() {
      const savedPosts = localStorage.getItem("posts");
      if (savedPosts) {
        posts = JSON.parse(savedPosts);
      } else {
        // ì´ˆê¸° ë°ì´í„°
        posts = [
          { id: 1, title: "ê²Œì‹œíŒ ë””ìì¸ í”¼ë“œë°±", author: "ê´€ë¦¬ì", content: "ììœ ë¡­ê²Œ ì˜ê²¬ì„ ë‚¨ê²¨ì£¼ì„¸ìš”.", date: "2025-11-04", views: 50 },
          { id: 2, title: "ì˜¤ëŠ˜ ì ì‹¬ ë­ ë¨¹ì„ê¹Œìš”?", author: "í™ê¸¸ë™", content: "ê¹€ì¹˜ì°Œê°œ vs ì œìœ¡ë³¶ìŒ", date: "2025-11-05", views: 30 }
        ];
        savePosts();
      }
      renderPosts();
    };

    // ğŸ’¾ LocalStorageì— ì €ì¥
    function savePosts() {
      localStorage.setItem("posts", JSON.stringify(posts));
    }

    // í™”ë©´ ì „í™˜
    function showWritePage(editMode = false) {
      document.getElementById('list-page').style.display = 'none';
      document.getElementById('view-page').style.display = 'none';
      document.getElementById('write-page').style.display = 'block';

      if (editMode && currentPostId) {
        const post = posts.find(p => p.id === currentPostId);
        document.getElementById('title').value = post.title;
        document.getElementById('author').value = post.author;
        document.getElementById('content').value = post.content;
      } else {
        document.getElementById('postForm').reset();
        currentPostId = null;
      }
    }

    function showListPage() {
      document.getElementById('write-page').style.display = 'none';
      document.getElementById('view-page').style.display = 'none';
      document.getElementById('list-page').style.display = 'block';
      renderPosts();
    }

    function showViewPage(id) {
      const post = posts.find(p => p.id === id);
      if (!post) return;

      currentPostId = id;
      post.views += 1;
      savePosts();

      document.getElementById('view-title').innerText = post.title;
      document.getElementById('view-author').innerText = post.author;
      document.getElementById('view-content').innerText = post.content;

      document.getElementById('list-page').style.display = 'none';
      document.getElementById('write-page').style.display = 'none';
      document.getElementById('view-page').style.display = 'block';
    }

    // ğŸ“‹ ëª©ë¡ ë Œë”ë§
    function renderPosts() {
      const postList = document.getElementById('postList');
      postList.innerHTML = "";

      const sorted = [...posts].sort((a, b) => b.id - a.id);
      sorted.forEach(post => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${post.id}</td>
          <td class="title" onclick="showViewPage(${post.id})">${post.title}</td>
          <td>${post.author}</td>
          <td>${post.date}</td>
          <td>${post.views}</td>
        `;
        postList.appendChild(row);
      });
    }

    // âœï¸ ê¸€ ë“±ë¡ / ìˆ˜ì •
    document.getElementById('postForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const title = document.getElementById('title').value.trim();
      const author = document.getElementById('author').value.trim();
      const content = document.getElementById('content').value.trim();

      if (!title || !author) {
        alert("ì œëª©ê³¼ ì‘ì„±ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }

      if (currentPostId) {
        const post = posts.find(p => p.id === currentPostId);
        post.title = title;
        post.author = author;
        post.content = content;
        alert("ê²Œì‹œê¸€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!");
      } else {
        const newPost = {
          id: posts.length ? posts[posts.length - 1].id + 1 : 1,
          title, author, content,
          date: new Date().toISOString().split('T')[0],
          views: 0
        };
        posts.push(newPost);
        alert("ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
      }

      savePosts();
      showListPage();
    });

    // ğŸ—‘ï¸ ì‚­ì œ
    function deletePost() {
      if (!currentPostId) return;
      if (confirm("ì •ë§ ì´ ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        posts = posts.filter(p => p.id !== currentPostId);
        savePosts();
        alert("ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        showListPage();
      }
    }
  </script>
</body>
</html>
